!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("omdomdom")):"function"==typeof define&&define.amd?define(["exports","omdomdom"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).rotom={},t.omdomdom)}(this,(function(t,e){"use strict";const o=t=>Object.prototype.toString.call(t).slice(8,-1).toLowerCase(),r=t=>{if(!(t=>"object"===o(t))(t))return!1;for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0},n=t=>"function"===o(t),i=t=>"undefined"===o(t),s=t=>t&&t.match(/[A-Z]{2,}(?=[A-Z][a-z]+[0-9]*|\b)|[A-Z]?[a-z]+[0-9]*|[A-Z]|[0-9]+/g).map((t=>t.toLowerCase())).join("-"),c=t=>{const e=document.createElement("div");return e.textContent=t,""+e.innerHTML};function d(){const t=window.requestAnimationFrame,e=window.setTimeout;let o=null;return r=>function(r){o||(n(t)?o=t((()=>{o=null,r()})):n(e)&&(o=e((()=>{o=null,r()}),16.666666666666668)))}(r)}const l="dir",u="ltr",a={rotomIdProperty:"rotomId",requestRender:"requestRender",render:"render",staticProperties:"properties",staticStyles:"styles",rotomIdAttribute:"rotom-id",onConnect:"onConnect",onMount:"onMount",onUpdate:"onUpdate",onPropertyChange:"onPropertyChange",onAttributeChange:"onAttributeChange",onUnmount:"onUnmount"},h={rotomId:Symbol("#rotomId"),vDOM:Symbol("#vDOM"),isFirstRender:Symbol("#isFirstRender"),renderer:Symbol("#renderer"),initialize:Symbol("#initialize"),schedule:Symbol("#schedule"),runLifecycle:Symbol("#runLifecycle"),upgrade:Symbol("#upgrade"),upgradeProperties:Symbol("#upgradeProperties"),renderStyles:Symbol("#renderStyles"),renderDOM:Symbol("#renderDOM"),patch:Symbol("#patch"),destroy:Symbol("#destroy")};const m=(t,e,o,r)=>{const{default:d,type:l,reflected:u=!1,safe:a=!1}=o;let h;if(n(d)?h=d(t):void 0!==t[e]?(h=t[e],t["__".concat(e,"_initial")]=h):h=d,i(h)||(a&&"string"==typeof h&&(h=c(h)),t[r]=h),u){const o=h?String(h):"",r=s(e);t.setAttribute(r,o)}},p=function(t,e){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(Object.getOwnPropertyDescriptor(Object.getPrototypeOf(t),e))return;const r=Symbol(e),{type:n,reflected:d=!1,safe:l=!1}=o;m(t,e,o,r),Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:()=>t[r],set(o){if(o===t[r])return;const u=t[r];if(i(o)){if(delete t[r],t[h.runLifecycle](a.onPropertyChange,e,u,o),d){const o=s(e);t.removeAttribute(o)}}else if(t[r]=l&&"string"===n&&"string"==typeof o?c(o):o,t[h.runLifecycle](a.onPropertyChange,e,u,o),d){const r=s(e),n=String(o);t.setAttribute(r,n)}t[a.requestRender]()}})};const f=t=>Object.prototype.toString.call(t).slice(8,-1).toLowerCase();!function(){if(window.__ROTOM_ELEMENT__DIR_OBSERVER__)return;window.__ROTOM_ELEMENT__DIR_OBSERVER__=!0;const t=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;const o=Array.apply(null,e.querySelectorAll("[rotom-id]"));o.length&&o.forEach((e=>{e.setAttribute("dir",String(document.dir||"ltr")),e.shadowRoot&&t(e.shadowRoot)}))};new MutationObserver((e=>{e.forEach((e=>{"dir"===e.attributeName&&t()}))})).observe(document.documentElement,{attributes:!0})}();const y=function(t){return class extends HTMLElement{constructor(){super(),this[h.schedule]=d(),this[h.renderer]=t({Internal:h,External:a}),this.attachShadow({mode:"open"}),this[h.patch]=this[h.patch].bind(this),this[h.isFirstRender]=!0,this[h.vDOM]=null,this[h.rotomId]=(()=>{const t=Number.MAX_SAFE_INTEGER;return Math.floor(Math.random()*t).toString(36)+Math.abs(Date.now()).toString(36)})()}static get observedAttributes(){const t=this[a.staticProperties];if(r(t))return[];let e=[];for(let o in t)t[o].reflected&&e.push(s(o));return e}adoptedCallback(){}attributeChangedCallback(t,e,o){e!==o&&this[h.runLifecycle](a.onAttributeChange,t,e,o)}connectedCallback(){this.isConnected&&(this[h.upgrade](),this[h.runLifecycle](a.onConnect),this[h.renderStyles](),this[a.requestRender]())}disconnectedCallback(){this[h.runLifecycle](a.onUnmount),this[h.destroy]()}get[a.rotomIdProperty](){return this[h.rotomId]}[a.requestRender](){this[h.schedule](this[h.patch])}[h.runLifecycle](t){if(n(this[t])){for(var e=arguments.length,o=new Array(e>1?e-1:0),r=1;r<e;r++)o[r-1]=arguments[r];this[t](...o)}}[h.upgrade](){this.setAttribute(a.rotomIdAttribute,this[a.rotomIdProperty]),this.setAttribute(l,String(document.dir||u)),this[h.upgradeProperties]()}[h.upgradeProperties](){const t=this.constructor[a.staticProperties];if(!r(t))for(let e in t)p(this,e,t[e])}[h.destroy](){this[h.renderer].destroy(this)}[h.patch](){this[h.renderer].patch(this)}[h.renderStyles](){const t=this.constructor[a.staticStyles];if("string"!==o(t))return;const e=document.createElement("style");e.type="text/css",e.textContent=t,this.shadowRoot.appendChild(e)}}}((function(t){let{Internal:o,External:r}=t;function n(t){let e;if(o=t[r.render],"function"!==f(o))throw new Error("[Rotom]: You must include a render method in element: '".concat(t.constructor.name,"'"));var o;if(e=t[r.render](),!(t=>"string"===f(t))(e))throw new Error("[Rotom]: You attempted to render a non-string template in element: '".concat(t.constructor.name,"'."));return e}return{patch(t){window&&window.document&&(t[o.isFirstRender]?(t[o.isFirstRender]=!1,function(t){t[o.vDOM]=e.create(n(t)),e.render(t[o.vDOM],t.shadowRoot),t[o.runLifecycle](r.onMount)}(t)):function(t){let i=e.create(n(t));e.patch(i,t[o.vDOM]),t[o.runLifecycle](r.onUpdate),i=null}(t))},destroy(t){if(!window||!window.document)return;const r={type:"comment",attributes:{},children:null,content:"",node:document.createComment("")};t[o.isFirstRender]=!0,e.patch(r,t[o.vDOM]),t[o.vDOM]=null;const n=t.shadowRoot.childNodes;n.length&&Array.prototype.forEach.call(n,(e=>t.shadowRoot.removeChild(e)))}}}));t.Rotom=y,t.register=(t,e)=>{customElements.get(t)||customElements.define(t,e)},t.validateType=function(t,e,r,n){if(void 0===n)return;const i=o(r);void 0!==n&&i!==n&&function(t){console[arguments.length>1&&void 0!==arguments[1]?arguments[1]:"warn"]("[Rotom]: ".concat(t))}("Property '".concat(e,"' is invalid type of '").concat(i,"'. Expected '").concat(n,"'. Check ").concat(t.constructor.name,"."))},Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=rotom.template.min.js.map
