!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("omdomdom")):"function"==typeof define&&define.amd?define(["exports","omdomdom"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).rotom={},t.omdomdom)}(this,(function(t,e){"use strict";const r=t=>Object.prototype.toString.call(t).slice(8,-1).toLowerCase(),o=t=>{if(!(t=>"object"===r(t))(t))return!1;for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0},n=t=>"function"===r(t),i=t=>"undefined"===r(t),s=t=>t&&t.match(/[A-Z]{2,}(?=[A-Z][a-z]+[0-9]*|\b)|[A-Z]?[a-z]+[0-9]*|[A-Z]|[0-9]+/g).map((t=>t.toLowerCase())).join("-"),c=t=>{const e=document.createElement("div");return e.textContent=t,""+e.innerHTML};function d(){const t=window.requestAnimationFrame,e=window.setTimeout;let r=null;return o=>function(o){r||(n(t)?r=t((()=>{r=null,o()})):n(e)&&(r=e((()=>{r=null,o()}),16.666666666666668)))}(o)}const u="dir",a="ltr",l={rotomIdProperty:"rotomId",requestRender:"requestRender",render:"render",staticProperties:"properties",staticStyles:"styles",rotomIdAttribute:"rotom-id",onConnect:"onConnect",onMount:"onMount",onUpdate:"onUpdate",onPropertyChange:"onPropertyChange",onAttributeChange:"onAttributeChange",onUnmount:"onUnmount"},m={rotomId:Symbol("#rotomId"),vDOM:Symbol("#vDOM"),isFirstRender:Symbol("#isFirstRender"),renderer:Symbol("#renderer"),initialize:Symbol("#initialize"),schedule:Symbol("#schedule"),runLifecycle:Symbol("#runLifecycle"),upgrade:Symbol("#upgrade"),upgradeProperties:Symbol("#upgradeProperties"),renderStyles:Symbol("#renderStyles"),renderDOM:Symbol("#renderDOM"),patch:Symbol("#patch"),destroy:Symbol("#destroy")};const h=(t,e,r={})=>{if(Object.getOwnPropertyDescriptor(Object.getPrototypeOf(t),e))return;const o=Symbol(e),{type:d,reflected:u=!1,safe:a=!1}=r;((t,e,r,o)=>{const{default:d,type:u,reflected:a=!1,safe:l=!1}=r;let m;if(n(d)?m=d(t):void 0!==t[e]?(m=t[e],t["__".concat(e,"_initial")]=m):m=d,i(m)||(l&&"string"==typeof m&&(m=c(m)),t[o]=m),a){const r=m?String(m):"",o=s(e);t.setAttribute(o,r)}})(t,e,r,o),Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:()=>t[o],set(r){if(r===t[o])return;const n=t[o];if(i(r)){if(delete t[o],t[m.runLifecycle](l.onPropertyChange,e,n,r),u){const r=s(e);t.removeAttribute(r)}}else if(t[o]=a&&"string"===d&&"string"==typeof r?c(r):r,t[m.runLifecycle](l.onPropertyChange,e,n,r),u){const o=s(e),n=String(r);t.setAttribute(o,n)}t[l.requestRender]()}})};const p=t=>Object.prototype.toString.call(t).slice(8,-1).toLowerCase();!function(){if(window.__ROTOM_ELEMENT__DIR_OBSERVER__)return;window.__ROTOM_ELEMENT__DIR_OBSERVER__=!0;const t=(e=document)=>{const r=Array.apply(null,e.querySelectorAll("[rotom-id]"));r.length&&r.forEach((e=>{e.setAttribute("dir",String(document.dir||"ltr")),e.shadowRoot&&t(e.shadowRoot)}))};new MutationObserver((e=>{e.forEach((e=>{"dir"===e.attributeName&&t()}))})).observe(document.documentElement,{attributes:!0})}();const f=function(t){return class extends HTMLElement{constructor(){super(),this[m.schedule]=d(),this[m.renderer]=t({Internal:m,External:l}),this.attachShadow({mode:"open"}),this[m.patch]=this[m.patch].bind(this),this[m.isFirstRender]=!0,this[m.vDOM]=null,this[m.rotomId]=(()=>{const t=Number.MAX_SAFE_INTEGER;return Math.floor(Math.random()*t).toString(36)+Math.abs(Date.now()).toString(36)})()}static get observedAttributes(){const t=this[l.staticProperties];if(o(t))return[];let e=[];for(let r in t)t[r].reflected&&e.push(s(r));return e}adoptedCallback(){}attributeChangedCallback(t,e,r){e!==r&&this[m.runLifecycle](l.onAttributeChange,t,e,r)}connectedCallback(){this.isConnected&&(this[m.upgrade](),this[m.runLifecycle](l.onConnect),this[m.renderStyles](),this[l.requestRender]())}disconnectedCallback(){this[m.runLifecycle](l.onUnmount),this[m.destroy]()}get[l.rotomIdProperty](){return this[m.rotomId]}[l.requestRender](){this[m.schedule](this[m.patch])}[m.runLifecycle](t,...e){n(this[t])&&this[t](...e)}[m.upgrade](){this.setAttribute(l.rotomIdAttribute,this[l.rotomIdProperty]),this.setAttribute(u,String(document.dir||a)),this[m.upgradeProperties]()}[m.upgradeProperties](){const t=this.constructor[l.staticProperties];if(!o(t))for(let e in t)h(this,e,t[e])}[m.destroy](){this[m.renderer].destroy(this)}[m.patch](){this[m.renderer].patch(this)}[m.renderStyles](){const t=this.constructor[l.staticStyles];if("string"!==r(t))return;const e=document.createElement("style");e.type="text/css",e.textContent=t,this.shadowRoot.appendChild(e)}}}((function({Internal:t,External:r}){function o(t){let e;if(o=t[r.render],"function"!==p(o))throw new Error("[Rotom]: You must include a render method in element: '".concat(t.constructor.name,"'"));var o;if(e=t[r.render](),!(t=>"string"===p(t))(e))throw new Error("[Rotom]: You attempted to render a non-string template in element: '".concat(t.constructor.name,"'."));return e}return{patch(n){window&&window.document&&(n[t.isFirstRender]?(n[t.isFirstRender]=!1,function(n){n[t.vDOM]=e.create(o(n)),e.render(n[t.vDOM],n.shadowRoot),n[t.runLifecycle](r.onMount)}(n)):function(n){let i=e.create(o(n));e.patch(i,n[t.vDOM]),n[t.runLifecycle](r.onUpdate),i=null}(n))},destroy(r){if(!window||!window.document)return;const o={type:"comment",attributes:{},children:null,content:"",node:document.createComment("")};r[t.isFirstRender]=!0,e.patch(o,r[t.vDOM]),r[t.vDOM]=null;const n=r.shadowRoot.childNodes;n.length&&Array.prototype.forEach.call(n,(t=>r.shadowRoot.removeChild(t)))}}}));t.Rotom=f,t.register=(t,e)=>{customElements.get(t)||customElements.define(t,e)},t.validateType=function(t,e,o,n){if(void 0===n)return;const i=r(o);void 0!==n&&i!==n&&function(t,e="warn"){console[e]("[Rotom]: ".concat(t))}("Property '".concat(e,"' is invalid type of '").concat(i,"'. Expected '").concat(n,"'. Check ").concat(t.constructor.name,"."))},Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=rotom.template.min.js.map
