{"version":3,"file":"rotom.template.js","sources":["../src/utilities/create-uuid.js","../src/utilities/is-type.js","../src/utilities/transform-case.js","../src/utilities/sanitize-string.js","../src/utilities/log.js","../src/scheduler/index.js","../src/enums.js","../src/properties/validate-type.js","../src/properties/initialize-property-value.js","../src/properties/upgrade-property.js","../src/rotom-factory.js","../src/renderers/template/utilities/index.js","../src/renderers/template/renderer.js","../src/observers/index.js","../src/register.js","../src/rotom.template.js"],"sourcesContent":["/**\n * Generates a unique 19 digit ID based on Date.now() and MAX_SAFE_INTEGER\n * @returns {string}\n */\nexport const createUUID = () => {\n  const base = Number.MAX_SAFE_INTEGER\n  return (\n    Math.floor(Math.random() * base).toString(36) +\n    Math.abs(Date.now()).toString(36)\n  )\n}\n","/**\n * Returns the stringified data type as given from the object tag.\n * @param {*} value\n * @returns {string}\n */\nexport const getTypeTag = (value) =>\n  Object.prototype.toString.call(value).slice(8, -1).toLowerCase()\n\n/**\n * Checks if the value is an object literal.\n * @param {*} value\n * @returns {boolean}\n */\nexport const isPlainObject = (value) => getTypeTag(value) === \"object\"\n\n/**\n * Checks if the value is an object literal with no enumerable properties.\n * @param {*} value\n * @returns {boolean}\n */\nexport const isEmptyObject = (value) => {\n  if (!isPlainObject(value)) return false\n\n  for (let key in value) {\n    if (Object.prototype.hasOwnProperty.call(value, key)) {\n      return false\n    }\n  }\n\n  return true\n}\n\n/**\n * Checks if the value is a function.\n * @param {*} value\n * @returns {boolean}\n */\nexport const isFunction = (value) => getTypeTag(value) === \"function\"\n\n/**\n * Checks if the value is a string literal.\n * @param {*} value\n * @returns {boolean}\n */\nexport const isString = (value) => getTypeTag(value) === \"string\"\n\n/**\n * Checks if the value is undefined.\n * @param {*} value\n * @returns {boolean}\n */\nexport const isUndefined = (value) => getTypeTag(value) === \"undefined\"\n","/**\n * Converts a camel- or Pascal-case string to kebab-case.\n * @param {string} value\n * @returns {string}\n */\nexport const toKebabCase = (value) =>\n  value &&\n  value\n    .match(/[A-Z]{2,}(?=[A-Z][a-z]+[0-9]*|\\b)|[A-Z]?[a-z]+[0-9]*|[A-Z]|[0-9]+/g)\n    .map((x) => x.toLowerCase())\n    .join(\"-\")\n","/**\n * Sanitize a string value to remove special characters.\n * @param {string} value\n * @returns {string}\n */\nexport const sanitizeString = (value) => {\n  const dump = document.createElement(\"div\")\n  dump.textContent = value\n  return \"\" + dump.innerHTML\n}\n","/**\n * Logs a message of the specified type\n * @param {string} msg\n * @param {string} type\n */\nexport function log(msg, type = \"warn\") {\n  // eslint-disable-next-line no-console\n  console[type](`[Rotom]: ${msg}`)\n}\n","import { isFunction } from \"../utilities\"\n\n/**\n * This scheduler uses either requestAnimationFrame or setTimeout\n * to schedule a function at approximately the next frame.\n *\n * These need to be async because the function may block other\n * operations before updating.\n */\n\nexport function createScheduler() {\n  // Store these in case for some reason they are reassigned later.\n  const requestAnimationFrame = window.requestAnimationFrame\n  const setTimeout = window.setTimeout\n  const FRAME_DURATION = 1000 / 60\n  let scheduled = null\n\n  /**\n   * Executes a rAF or timeout (depending on which is available)\n   * If a fn is already scheduled, nothing happens.\n   */\n  function schedule(fn) {\n    if (scheduled) return\n\n    if (isFunction(requestAnimationFrame)) {\n      scheduled = requestAnimationFrame(() => {\n        scheduled = null\n        fn()\n      })\n    } else if (isFunction(setTimeout)) {\n      scheduled = setTimeout(() => {\n        scheduled = null\n        fn()\n      }, FRAME_DURATION)\n    }\n  }\n\n  return (fn) => schedule(fn)\n}\n","export const Attributes = {\n  dir: \"dir\",\n}\n\nexport const AttributeValues = {\n  ltr: \"ltr\",\n}\n\nexport const External = {\n  // Properties & methods\n  rotomIdProperty: \"rotomId\",\n  requestRender: \"requestRender\",\n  render: \"render\",\n  staticProperties: \"properties\",\n  staticStyles: \"styles\",\n\n  // Attributes\n  rotomIdAttribute: \"rotom-id\",\n\n  // Lifecycle\n  onConnect: \"onConnect\",\n  onMount: \"onMount\",\n  onUpdate: \"onUpdate\",\n  onPropertyChange: \"onPropertyChange\",\n  onAttributeChange: \"onAttributeChange\",\n  onUnmount: \"onUnmount\",\n}\n\nexport const Internal = {\n  // Primitives\n  rotomId: Symbol(\"#rotomId\"),\n  vDOM: Symbol(\"#vDOM\"),\n  isFirstRender: Symbol(\"#isFirstRender\"),\n\n  // Methods\n  renderer: Symbol(\"#renderer\"),\n  initialize: Symbol(\"#initialize\"),\n  schedule: Symbol(\"#schedule\"),\n  runLifecycle: Symbol(\"#runLifecycle\"),\n  upgrade: Symbol(\"#upgrade\"),\n  upgradeProperties: Symbol(\"#upgradeProperties\"),\n  renderStyles: Symbol(\"#renderStyles\"),\n  renderDOM: Symbol(\"#renderDOM\"),\n  patch: Symbol(\"#patch\"),\n  destroy: Symbol(\"#destroy\"),\n}\n","import { log, getTypeTag } from \"../utilities\"\n\nexport function validateType(Instance, propName, value, type) {\n  if (typeof type === \"undefined\") return\n\n  const evaluatedType = getTypeTag(value)\n\n  if (type === undefined || evaluatedType === type) return\n\n  log(\n    `Property '${propName}' is invalid type of '${evaluatedType}'. Expected '${type}'. Check ${Instance.constructor.name}.`\n  )\n}\n","import { validateType } from \"./validate-type\"\nimport {\n  isFunction,\n  isUndefined,\n  toKebabCase,\n  sanitizeString,\n} from \"../utilities\"\n\nexport const initializePropertyValue = (\n  RotomInstance,\n  propName,\n  configuration,\n  privateName\n) => {\n  const {\n    default: defaultValue,\n    type: propType,\n    reflected = false,\n    safe = false,\n  } = configuration\n\n  // Initializing the property value:\n  //\n  // 1. If the default is a function, call it with the instance itself\n  //    as the only argument\n  // 2. If the prop name happens to be an existing property, set aside\n  //    the property's value to a separate prop and use its value on\n  //    the replacement\n  // 3. Otherwise, just set the value as the default\n\n  let initialValue\n\n  if (isFunction(defaultValue)) {\n    initialValue = defaultValue(RotomInstance)\n  } else if (typeof RotomInstance[propName] !== \"undefined\") {\n    initialValue = RotomInstance[propName]\n\n    // Set aside the initial value to a new property, before it's\n    // deleted by the new accessors.\n    RotomInstance[`__${propName}_initial`] = initialValue\n  } else {\n    initialValue = defaultValue\n  }\n\n  // Validate the property's default value type, if given\n  // Initialize the private property\n\n  if (!isUndefined(initialValue)) {\n    if (BUILD_ENV === \"development\") {\n      validateType(RotomInstance, propName, initialValue, propType)\n    }\n\n    if (safe && typeof initialValue === \"string\") {\n      initialValue = sanitizeString(initialValue)\n    }\n\n    RotomInstance[privateName] = initialValue\n  }\n\n  // If the value is reflected, set its attribute.\n\n  if (reflected) {\n    const initialAttrValue = initialValue ? String(initialValue) : \"\"\n    const attribute = toKebabCase(propName)\n    RotomInstance.setAttribute(attribute, initialAttrValue)\n  }\n}\n","import { Internal, External } from \"../enums\"\nimport { isUndefined, toKebabCase, sanitizeString } from \"../utilities\"\nimport { initializePropertyValue } from \"./initialize-property-value\"\nimport { validateType } from \"./validate-type\"\n\n/**\n * Upgrade a property based on its configuration. If accessors are detected in\n * the extender, skip the upgrade.\n * @param {Object} RotomInstance\n * @param {string} propName\n * @param {{value, default, reflected}} configuration\n */\nexport const upgradeProperty = (\n  RotomInstance,\n  propName,\n  configuration = {}\n) => {\n  // If the constructor class is using its own setter/getter, bail\n  if (\n    Object.getOwnPropertyDescriptor(\n      Object.getPrototypeOf(RotomInstance),\n      propName\n    )\n  ) {\n    return\n  }\n\n  const privateName = Symbol(propName)\n  const { type, reflected = false, safe = false } = configuration\n\n  initializePropertyValue(RotomInstance, propName, configuration, privateName)\n  // Finally, declare its accessors\n\n  Object.defineProperty(RotomInstance, propName, {\n    configurable: true,\n    enumerable: true,\n    get() {\n      return RotomInstance[privateName]\n    },\n    set(value) {\n      // Don't set if the value is the same to prevent unnecessary re-renders.\n      if (value === RotomInstance[privateName]) return\n\n      if (BUILD_ENV === \"development\") {\n        validateType(RotomInstance, propName, value, type)\n      }\n\n      const oldValue = RotomInstance[privateName]\n\n      if (!isUndefined(value)) {\n        RotomInstance[privateName] =\n          safe && type === \"string\" && typeof value === \"string\"\n            ? sanitizeString(value)\n            : value\n\n        RotomInstance[Internal.runLifecycle](\n          External.onPropertyChange,\n          propName,\n          oldValue,\n          value\n        )\n\n        if (reflected) {\n          const attribute = toKebabCase(propName)\n          const attrValue = String(value)\n          RotomInstance.setAttribute(attribute, attrValue)\n        }\n      } else {\n        delete RotomInstance[privateName]\n\n        RotomInstance[Internal.runLifecycle](\n          External.onPropertyChange,\n          propName,\n          oldValue,\n          value\n        )\n\n        if (reflected) {\n          const attribute = toKebabCase(propName)\n          RotomInstance.removeAttribute(attribute)\n        }\n      }\n\n      RotomInstance[External.requestRender]()\n    },\n  })\n}\n","import { createScheduler } from \"./scheduler\"\nimport { upgradeProperty } from \"./properties\"\nimport { Internal, External, Attributes, AttributeValues } from \"./enums\"\nimport {\n  isEmptyObject,\n  isString,\n  isFunction,\n  toKebabCase,\n  createUUID,\n} from \"./utilities\"\n\nconst SHADOW_ROOT_MODE = \"open\"\n\nexport function rotomFactory(renderer) {\n  /**\n   * @module Rotom\n   * @extends HTMLElement\n   */\n  return class Rotom extends HTMLElement {\n    constructor() {\n      super()\n\n      // Internal methods, properties, and data\n      this[Internal.schedule] = createScheduler()\n      this[Internal.renderer] = renderer({ Internal, External })\n\n      this.attachShadow({ mode: SHADOW_ROOT_MODE })\n\n      this[Internal.patch] = this[Internal.patch].bind(this)\n      this[Internal.isFirstRender] = true\n      this[Internal.vDOM] = null\n      this[Internal.rotomId] = createUUID()\n    }\n\n    // Retrieve defined properties from the constructor.\n    static get observedAttributes() {\n      const properties = this[External.staticProperties]\n\n      if (isEmptyObject(properties)) return []\n\n      let attributes = []\n      for (let propName in properties) {\n        if (!properties[propName].reflected) continue\n        attributes.push(toKebabCase(propName))\n      }\n      return attributes\n    }\n\n    // Keep adoptedCallback around in case it becomes useful later.\n    // Consumers will need to call super() to remain compatible,\n    // in the mean time.\n    adoptedCallback() {}\n\n    attributeChangedCallback(name, oldValue, newValue) {\n      if (oldValue !== newValue) {\n        this[Internal.runLifecycle](\n          External.onAttributeChange,\n          name,\n          oldValue,\n          newValue\n        )\n      }\n    }\n\n    connectedCallback() {\n      // It's possible for elements to queue this callback\n      // and then disconnect before resolving. This ensures\n      // the element is actually connected before proceeding.\n      if (!this.isConnected) return\n\n      this[Internal.upgrade]()\n      this[Internal.runLifecycle](External.onConnect)\n      this[Internal.renderStyles]()\n      this[External.requestRender]()\n    }\n\n    disconnectedCallback() {\n      this[Internal.runLifecycle](External.onUnmount)\n      this[Internal.destroy]()\n    }\n\n    // Public\n\n    /**\n     * Returns the Internal element id.\n     * @returns {string}\n     */\n    get [External.rotomIdProperty]() {\n      return this[Internal.rotomId]\n    }\n\n    /**\n     * Requests a new render.\n     */\n    [External.requestRender]() {\n      this[Internal.schedule](this[Internal.patch])\n    }\n\n    // Private\n\n    /**\n     * If the method is defined by the constructor, run it.\n     * @param {string} methodName - name of the possible method\n     * @param {arguments} args - args to pass along to the method, if any\n     */\n    [Internal.runLifecycle](methodName, ...args) {\n      if (isFunction(this[methodName])) {\n        this[methodName](...args)\n      }\n    }\n\n    [Internal.upgrade]() {\n      // Set element id prop as an attribute\n      this.setAttribute(\n        External.rotomIdAttribute,\n        this[External.rotomIdProperty]\n      )\n\n      // Set document direction for reflow support in shadow roots\n      this.setAttribute(\n        Attributes.dir,\n        String(document.dir || AttributeValues.ltr)\n      )\n\n      // Upgrade stateful properties\n      this[Internal.upgradeProperties]()\n    }\n\n    /**\n     * Upgrade properties detected in the constructor.\n     */\n    [Internal.upgradeProperties]() {\n      const properties = this.constructor[External.staticProperties]\n\n      if (isEmptyObject(properties)) return\n\n      for (let propName in properties) {\n        upgradeProperty(this, propName, properties[propName])\n      }\n    }\n\n    /**\n     * Called during disconnectedCallback. Clean up the vDOM\n     * and remove remaining nodes in the shadowRoot.\n     */\n    [Internal.destroy]() {\n      this[Internal.renderer].destroy(this)\n    }\n\n    /**\n     * Called during renderDOM. Runs reconciliation and updates\n     * the DOM with the new render state\n     */\n    [Internal.patch]() {\n      this[Internal.renderer].patch(this)\n    }\n\n    /**\n     * Creates the style tag and appends styles as detected in the constructor.\n     */\n    [Internal.renderStyles]() {\n      const styles = this.constructor[External.staticStyles]\n\n      if (!isString(styles)) return\n\n      const styleTag = document.createElement(\"style\")\n      styleTag.type = \"text/css\"\n      styleTag.textContent = styles\n      this.shadowRoot.appendChild(styleTag)\n    }\n  }\n}\n","/**\n * Returns the stringified data type as given from the object tag.\n * @param {*} value\n * @returns {string}\n */\nconst getTypeTag = (value) =>\n  Object.prototype.toString.call(value).slice(8, -1).toLowerCase()\n\n/**\n * Checks if the value is a function.\n * @param {*} value\n * @returns {boolean}\n */\nexport const isFunction = (value) => getTypeTag(value) === \"function\"\n\n/**\n * Checks if the value is a string literal.\n * @param {*} value\n * @returns {boolean}\n */\nexport const isString = (value) => getTypeTag(value) === \"string\"\n","import { patch, render, create } from \"omdomdom\"\nimport { isString, isFunction } from \"./utilities\"\n\nexport function renderer({ Internal, External }) {\n  function getRenderState(element) {\n    let domString\n\n    if (isFunction(element[External.render])) {\n      domString = element[External.render]()\n    } else {\n      throw new Error(\n        `[Rotom]: You must include a render method in element: '${element.constructor.name}'`\n      )\n    }\n\n    if (!isString(domString)) {\n      throw new Error(\n        `[Rotom]: You attempted to render a non-string template in element: '${element.constructor.name}'.`\n      )\n    }\n\n    return domString\n  }\n\n  function setInitialRenderState(element) {\n    element[Internal.vDOM] = create(getRenderState(element))\n    render(element[Internal.vDOM], element.shadowRoot)\n    element[Internal.runLifecycle](External.onMount)\n  }\n\n  function setNextRenderState(element) {\n    let nextVDOM = create(getRenderState(element))\n    patch(nextVDOM, element[Internal.vDOM])\n    element[Internal.runLifecycle](External.onUpdate)\n    nextVDOM = null\n  }\n\n  return {\n    patch(element) {\n      if (!window || !window.document) return\n\n      if (element[Internal.isFirstRender]) {\n        element[Internal.isFirstRender] = false\n        setInitialRenderState(element)\n      } else {\n        setNextRenderState(element)\n      }\n    },\n    destroy(element) {\n      if (!window || !window.document) return\n\n      const emptyVNode = {\n        type: \"comment\",\n        attributes: {},\n        children: null,\n        content: \"\",\n        node: document.createComment(\"\"),\n      }\n\n      element[Internal.isFirstRender] = true\n      patch(emptyVNode, element[Internal.vDOM])\n      element[Internal.vDOM] = null\n\n      const children = element.shadowRoot.childNodes\n      if (children.length) {\n        Array.prototype.forEach.call(children, (child) =>\n          element.shadowRoot.removeChild(child)\n        )\n      }\n    },\n  }\n}\n","export function createDirectionObserver() {\n  if (window.__ROTOM_ELEMENT__DIR_OBSERVER__) return\n  window.__ROTOM_ELEMENT__DIR_OBSERVER__ = true\n\n  /**\n   * Search for other rotom elements, denoted by the\n   * presence of `rotom-id` on the element, and update\n   * its document direction.\n   * @param {HTMLElement|ShadowRoot} context\n   */\n  const updateDirection = (context = document) => {\n    const nodes = Array.apply(null, context.querySelectorAll(\"[rotom-id]\"))\n    if (!nodes.length) return\n\n    nodes.forEach((node) => {\n      node.setAttribute(\"dir\", String(document.dir || \"ltr\"))\n\n      if (node.shadowRoot) {\n        updateDirection(node.shadowRoot)\n      }\n    })\n  }\n\n  const mutationObserver = new MutationObserver((mutations) => {\n    mutations.forEach((mutation) => {\n      if (mutation.attributeName === \"dir\") {\n        updateDirection()\n      }\n    })\n  })\n\n  mutationObserver.observe(document.documentElement, { attributes: true })\n}\n","/**\n * Adds custom element to the global registry.\n * @param {string} tag\n * @param {module} RotomInstance\n */\nexport const register = (tag, RotomInstance) => {\n  if (!customElements.get(tag)) {\n    customElements.define(tag, RotomInstance)\n  }\n}\n","import { rotomFactory } from \"./rotom-factory\"\nimport { renderer } from \"./renderers/template\"\nimport { createDirectionObserver } from \"./observers\"\n\ncreateDirectionObserver()\n\nexport const Rotom = rotomFactory(renderer)\nexport { register } from \"./register\"\nexport { validateType } from \"./properties\"\n"],"names":["createUUID","base","Number","MAX_SAFE_INTEGER","Math","floor","random","toString","abs","Date","now","getTypeTag","value","Object","prototype","call","slice","toLowerCase","isPlainObject","isEmptyObject","key","hasOwnProperty","isFunction","isString","isUndefined","toKebabCase","match","map","x","join","sanitizeString","dump","document","createElement","textContent","innerHTML","log","msg","type","console","createScheduler","requestAnimationFrame","window","setTimeout","FRAME_DURATION","scheduled","schedule","fn","Attributes","dir","AttributeValues","ltr","External","rotomIdProperty","requestRender","render","staticProperties","staticStyles","rotomIdAttribute","onConnect","onMount","onUpdate","onPropertyChange","onAttributeChange","onUnmount","Internal","rotomId","Symbol","vDOM","isFirstRender","renderer","initialize","runLifecycle","upgrade","upgradeProperties","renderStyles","renderDOM","patch","destroy","validateType","Instance","propName","evaluatedType","undefined","constructor","name","initializePropertyValue","RotomInstance","configuration","privateName","default","defaultValue","propType","reflected","safe","initialValue","initialAttrValue","String","attribute","setAttribute","upgradeProperty","getOwnPropertyDescriptor","getPrototypeOf","defineProperty","configurable","enumerable","get","set","oldValue","attrValue","removeAttribute","SHADOW_ROOT_MODE","rotomFactory","Rotom","HTMLElement","attachShadow","mode","bind","observedAttributes","properties","attributes","push","adoptedCallback","attributeChangedCallback","newValue","connectedCallback","isConnected","disconnectedCallback","methodName","args","styles","styleTag","shadowRoot","appendChild","getRenderState","element","domString","Error","setInitialRenderState","create","setNextRenderState","nextVDOM","emptyVNode","children","content","node","createComment","childNodes","length","Array","forEach","child","removeChild","createDirectionObserver","__ROTOM_ELEMENT__DIR_OBSERVER__","updateDirection","context","nodes","apply","querySelectorAll","mutationObserver","MutationObserver","mutations","mutation","attributeName","observe","documentElement","register","tag","customElements","define"],"mappings":"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"}